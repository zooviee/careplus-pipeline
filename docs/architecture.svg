<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 1050" font-family="'Segoe UI', Arial, sans-serif">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1e293b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="sourceGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1e40af;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="sourceGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#065f46;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#10b981;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="pythonGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1e3a5f;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2563eb;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="pythonGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#14532d;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#22c55e;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="s3Grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#92400e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f59e0b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="snowGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#155e75;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#22d3ee;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="silverGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4c1d95;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="goldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#78350f;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fbbf24;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="biGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#831843;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ec4899;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="115%">
      <feDropShadow dx="0" dy="3" stdDeviation="4" flood-color="#000000" flood-opacity="0.4"/>
    </filter>
    <filter id="glowBlue">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="1050" rx="16" fill="url(#bgGrad)"/>

  <!-- Title -->
  <text x="450" y="40" text-anchor="middle" fill="#f8fafc" font-size="22" font-weight="bold" letter-spacing="1">CarePlus Data Pipeline — Architecture Overview</text>
  <line x1="200" y1="52" x2="700" y2="52" stroke="#334155" stroke-width="1"/>

  <!-- ==================== ROW 1: DATA SOURCES ==================== -->
  <!-- MySQL Database -->
  <g filter="url(#shadow)">
    <rect x="60" y="80" width="240" height="65" rx="10" fill="url(#sourceGrad1)" stroke="#60a5fa" stroke-width="1.5"/>
    <!-- DB icon -->
    <ellipse cx="95" cy="105" rx="14" ry="8" fill="none" stroke="#bfdbfe" stroke-width="1.5"/>
    <path d="M81 105 v16 a14,8 0 0,0 28,0 v-16" fill="none" stroke="#bfdbfe" stroke-width="1.5"/>
    <line x1="81" y1="113" x2="109" y2="113" stroke="#bfdbfe" stroke-width="0.8" opacity="0.5"/>
    <text x="175" y="107" text-anchor="middle" fill="#e0f2fe" font-size="15" font-weight="bold">MySQL Database</text>
    <text x="175" y="130" text-anchor="middle" fill="#93c5fd" font-size="11">Source: Support Tickets</text>
  </g>

  <!-- .log Files -->
  <g filter="url(#shadow)">
    <rect x="600" y="80" width="240" height="65" rx="10" fill="url(#sourceGrad2)" stroke="#34d399" stroke-width="1.5"/>
    <!-- File icon -->
    <path d="M630 97 h16 l6 6 v18 h-22 z" fill="none" stroke="#bbf7d0" stroke-width="1.5"/>
    <path d="M646 97 v6 h6" fill="none" stroke="#bbf7d0" stroke-width="1.5"/>
    <text x="720" y="107" text-anchor="middle" fill="#d1fae5" font-size="15" font-weight="bold">.log Files</text>
    <text x="720" y="130" text-anchor="middle" fill="#6ee7b7" font-size="11">July 2025 Support Logs</text>
  </g>

  <!-- Arrows: Sources → Python -->
  <line x1="180" y1="145" x2="180" y2="185" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="720" y1="145" x2="720" y2="185" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- ==================== ROW 2: PYTHON EXTRACT / PARSE ==================== -->
  <!-- Python Extract -->
  <g filter="url(#shadow)">
    <rect x="70" y="190" width="220" height="55" rx="10" fill="url(#pythonGrad1)" stroke="#3b82f6" stroke-width="1.5"/>
    <!-- Python icon simplified -->
    <circle cx="100" cy="217" r="12" fill="none" stroke="#93c5fd" stroke-width="1.5"/>
    <text x="100" y="222" text-anchor="middle" fill="#93c5fd" font-size="12" font-weight="bold">Py</text>
    <text x="190" y="213" text-anchor="middle" fill="#dbeafe" font-size="14" font-weight="bold">Python Extract</text>
    <text x="190" y="232" text-anchor="middle" fill="#93c5fd" font-size="10">extract_tickets.py</text>
  </g>

  <!-- Python Parse -->
  <g filter="url(#shadow)">
    <rect x="610" y="190" width="220" height="55" rx="10" fill="url(#pythonGrad2)" stroke="#22c55e" stroke-width="1.5"/>
    <circle cx="640" cy="217" r="12" fill="none" stroke="#86efac" stroke-width="1.5"/>
    <text x="640" y="222" text-anchor="middle" fill="#86efac" font-size="12" font-weight="bold">Py</text>
    <text x="730" y="213" text-anchor="middle" fill="#dcfce7" font-size="14" font-weight="bold">Python Parse</text>
    <text x="730" y="232" text-anchor="middle" fill="#86efac" font-size="10">parse_logs.py</text>
  </g>

  <!-- Arrows: Python → S3 -->
  <line x1="180" y1="245" x2="180" y2="290" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="720" y1="245" x2="720" y2="290" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- ==================== ROW 3: AMAZON S3 ==================== -->
  <!-- S3 Left -->
  <g filter="url(#shadow)">
    <rect x="40" y="295" width="280" height="75" rx="10" fill="#1e293b" stroke="#f59e0b" stroke-width="1.5"/>
    <!-- S3 bucket icon -->
    <path d="M65 315 q0,-10 15,-10 q15,0 15,10 v20 q0,10 -15,10 q-15,0 -15,-10 z" fill="none" stroke="#fbbf24" stroke-width="1.5"/>
    <ellipse cx="80" cy="315" rx="15" ry="5" fill="none" stroke="#fbbf24" stroke-width="1"/>
    <text x="110" y="315" fill="#fbbf24" font-size="12" font-weight="bold">Amazon S3</text>
    <text x="110" y="333" fill="#fde68a" font-size="11">tickets/</text>
    <text x="110" y="350" fill="#d6d3d1" font-size="10" font-style="italic">support_tickets.csv</text>
  </g>

  <!-- S3 Right -->
  <g filter="url(#shadow)">
    <rect x="580" y="295" width="280" height="75" rx="10" fill="#1e293b" stroke="#f59e0b" stroke-width="1.5"/>
    <path d="M605 315 q0,-10 15,-10 q15,0 15,10 v20 q0,10 -15,10 q-15,0 -15,-10 z" fill="none" stroke="#fbbf24" stroke-width="1.5"/>
    <ellipse cx="620" cy="315" rx="15" ry="5" fill="none" stroke="#fbbf24" stroke-width="1"/>
    <text x="650" y="315" fill="#fbbf24" font-size="12" font-weight="bold">Amazon S3</text>
    <text x="650" y="333" fill="#fde68a" font-size="11">logs/</text>
    <text x="650" y="350" fill="#d6d3d1" font-size="10" font-style="italic">support_logs_2025-07-*.log</text>
  </g>

  <!-- Converging arrows: S3 → Snowflake Bronze -->
  <line x1="180" y1="370" x2="180" y2="410" stroke="#64748b" stroke-width="2"/>
  <line x1="720" y1="370" x2="720" y2="410" stroke="#64748b" stroke-width="2"/>
  <line x1="180" y1="410" x2="450" y2="430" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="720" y1="410" x2="450" y2="430" stroke="#64748b" stroke-width="2"/>

  <!-- ==================== ROW 4: SNOWFLAKE BRONZE ==================== -->
  <g filter="url(#shadow)">
    <rect x="225" y="435" width="450" height="90" rx="12" fill="#0c4a6e" stroke="#22d3ee" stroke-width="2"/>
    <!-- Snowflake icon -->
    <g transform="translate(260,465)">
      <line x1="0" y1="-12" x2="0" y2="12" stroke="#67e8f9" stroke-width="2"/>
      <line x1="-10" y1="-6" x2="10" y2="6" stroke="#67e8f9" stroke-width="2"/>
      <line x1="-10" y1="6" x2="10" y2="-6" stroke="#67e8f9" stroke-width="2"/>
      <circle cx="0" cy="0" r="3" fill="#22d3ee"/>
    </g>
    <text x="450" y="465" text-anchor="middle" fill="#ecfeff" font-size="16" font-weight="bold">Snowflake — Bronze Layer</text>
    <text x="450" y="488" text-anchor="middle" fill="#67e8f9" font-size="12">careplus.bronze.tickets</text>
    <text x="450" y="506" text-anchor="middle" fill="#67e8f9" font-size="12">careplus.bronze.logs</text>
    <!-- Badge -->
    <rect x="235" y="442" width="65" height="18" rx="9" fill="#164e63"/>
    <text x="267" y="454" text-anchor="middle" fill="#22d3ee" font-size="9" font-weight="bold">RAW DATA</text>
  </g>

  <!-- Arrow: Bronze → Silver -->
  <line x1="450" y1="525" x2="450" y2="570" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- dbt label on arrow -->
  <rect x="418" y="540" width="64" height="20" rx="5" fill="#4c1d95" stroke="#8b5cf6" stroke-width="1"/>
  <text x="450" y="554" text-anchor="middle" fill="#ddd6fe" font-size="10" font-weight="bold">dbt run</text>

  <!-- ==================== ROW 5: dbt SILVER ==================== -->
  <g filter="url(#shadow)">
    <rect x="225" y="575" width="450" height="90" rx="12" fill="#2e1065" stroke="#8b5cf6" stroke-width="2"/>
    <!-- dbt icon -->
    <g transform="translate(260,605)">
      <rect x="-10" y="-10" width="20" height="20" rx="4" fill="none" stroke="#c4b5fd" stroke-width="1.5"/>
      <text x="0" y="5" text-anchor="middle" fill="#c4b5fd" font-size="10" font-weight="bold">dbt</text>
    </g>
    <text x="450" y="605" text-anchor="middle" fill="#f5f3ff" font-size="16" font-weight="bold">dbt — Silver Layer</text>
    <text x="450" y="628" text-anchor="middle" fill="#c4b5fd" font-size="12">careplus.silver.stg_tickets</text>
    <text x="450" y="646" text-anchor="middle" fill="#c4b5fd" font-size="12">careplus.silver.stg_logs</text>
    <!-- Badge -->
    <rect x="235" y="582" width="75" height="18" rx="9" fill="#3b0764"/>
    <text x="272" y="594" text-anchor="middle" fill="#a78bfa" font-size="9" font-weight="bold">CLEANSED</text>
  </g>

  <!-- Arrow: Silver → Gold -->
  <line x1="450" y1="665" x2="450" y2="710" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <rect x="418" y="680" width="64" height="20" rx="5" fill="#78350f" stroke="#fbbf24" stroke-width="1"/>
  <text x="450" y="694" text-anchor="middle" fill="#fef3c7" font-size="10" font-weight="bold">dbt run</text>

  <!-- ==================== ROW 6: dbt GOLD ==================== -->
  <g filter="url(#shadow)">
    <rect x="200" y="715" width="500" height="105" rx="12" fill="#451a03" stroke="#fbbf24" stroke-width="2"/>
    <!-- Star/Gold icon -->
    <g transform="translate(240,750)">
      <polygon points="0,-12 3,-4 12,-4 5,2 7,11 0,6 -7,11 -5,2 -12,-4 -3,-4" fill="#fbbf24" opacity="0.8"/>
    </g>
    <text x="450" y="748" text-anchor="middle" fill="#fffbeb" font-size="16" font-weight="bold">dbt — Gold Layer</text>
    <text x="450" y="773" text-anchor="middle" fill="#fde68a" font-size="12">careplus.gold.fct_tickets</text>
    <text x="450" y="791" text-anchor="middle" fill="#fde68a" font-size="12">careplus.gold.fct_logs</text>
    <text x="450" y="809" text-anchor="middle" fill="#fde68a" font-size="12">careplus.gold.fct_ticket_log_summary</text>
    <!-- Badge -->
    <rect x="210" y="722" width="95" height="18" rx="9" fill="#78350f"/>
    <text x="257" y="734" text-anchor="middle" fill="#fbbf24" font-size="9" font-weight="bold">BUSINESS-READY</text>
  </g>

  <!-- Arrow: Gold → BI -->
  <line x1="450" y1="820" x2="450" y2="865" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- ==================== ROW 7: BI / ANALYTICS ==================== -->
  <g filter="url(#shadow)">
    <rect x="275" y="870" width="350" height="60" rx="12" fill="#500724" stroke="#ec4899" stroke-width="2"/>
    <!-- Chart icon -->
    <g transform="translate(310, 890)">
      <rect x="0" y="12" width="6" height="12" fill="#f9a8d4" rx="1"/>
      <rect x="9" y="6" width="6" height="18" fill="#f472b6" rx="1"/>
      <rect x="18" y="0" width="6" height="24" fill="#ec4899" rx="1"/>
    </g>
    <text x="450" y="900" text-anchor="middle" fill="#fce7f3" font-size="16" font-weight="bold">BI / Analytics Tools</text>
    <text x="450" y="920" text-anchor="middle" fill="#f9a8d4" font-size="11">Dashboards, Reports, Ad-hoc Queries</text>
  </g>

  <!-- ==================== AIRFLOW ORCHESTRATION BAR ==================== -->
  <g filter="url(#shadow)">
    <rect x="125" y="965" width="650" height="55" rx="12" fill="#1e293b" stroke="#38bdf8" stroke-width="2" stroke-dasharray="8,4"/>
    <!-- Airflow fan icon -->
    <g transform="translate(175, 992)">
      <circle cx="0" cy="0" r="4" fill="#38bdf8"/>
      <path d="M0,-4 Q-8,-14 -2,-14 Q4,-14 0,-4" fill="#38bdf8" opacity="0.7"/>
      <path d="M0,-4 Q-8,-14 -2,-14 Q4,-14 0,-4" fill="#38bdf8" opacity="0.7" transform="rotate(120)"/>
      <path d="M0,-4 Q-8,-14 -2,-14 Q4,-14 0,-4" fill="#38bdf8" opacity="0.7" transform="rotate(240)"/>
    </g>
    <text x="450" y="987" text-anchor="middle" fill="#e0f2fe" font-size="14" font-weight="bold">Orchestrated by Apache Airflow (Docker)</text>
    <text x="450" y="1008" text-anchor="middle" fill="#7dd3fc" font-size="12">Scheduled: every day at 2:00 AM UTC</text>
    <!-- Clock icon -->
    <g transform="translate(720, 992)">
      <circle cx="0" cy="0" r="10" fill="none" stroke="#7dd3fc" stroke-width="1.5"/>
      <line x1="0" y1="0" x2="0" y2="-6" stroke="#7dd3fc" stroke-width="1.5"/>
      <line x1="0" y1="0" x2="5" y2="2" stroke="#7dd3fc" stroke-width="1.5"/>
    </g>
  </g>

  <!-- Dashed connection lines from Airflow to pipeline steps -->
  <line x1="145" y1="965" x2="90" y2="370" stroke="#38bdf8" stroke-width="1" stroke-dasharray="4,4" opacity="0.25"/>
  <line x1="755" y1="965" x2="810" y2="370" stroke="#38bdf8" stroke-width="1" stroke-dasharray="4,4" opacity="0.25"/>
</svg>